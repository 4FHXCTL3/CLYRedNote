# CLYRedNote - 小红书克隆应用

基于 Android Compose 的小红书克隆应用，用于 GUI Agent 测试。

## 项目结构

### 数据模型 (Model)
位置: `app/src/main/java/com/example/CLYRedNote/model/`

- **User.kt** - 用户相关数据结构
- **Note.kt** - 笔记相关数据结构  
- **Comment.kt** - 评论数据结构
- **Message.kt** - 消息和通知数据结构
- **Product.kt** - 商品相关数据结构
- **Shopping.kt** - 购物车和订单数据结构
- **Follow.kt** - 关注关系数据结构
- **Collection.kt** - 收藏和点赞数据结构
- **Search.kt** - 搜索相关数据结构

### 初始数据 (Assets)
位置: `app/src/main/assets/data/`

- **users.json** - 用户数据，包含6个测试用户
- **notes.json** - 笔记数据，包含不同类型的笔记内容
- **comments.json** - 评论数据，包含笔记评论和回复
- **follows.json** - 关注关系数据
- **products.json** - 商品数据，包含运动鞋、美妆、服装等
- **messages.json** - 消息数据，包含文本、表情、笔记分享等
- **collections.json** - 收藏数据
- **shopping_cart.json** - 购物车数据
- **orders.json** - 订单数据
- **topics.json** - 话题数据

### 界面开发 (UI)
位置: `app/src/main/java/com/example/test05/`

#### 已完成功能

1. **HomeTab页面** (首页)
   - 顶部导航栏：关注、发现、同城三个选项卡，支持切换
   - 分类筛选行：推荐、视频、直播、短剧、穿搭、学习
   - 笔记瀑布流：双列网格布局，支持垂直滚动
   - 笔记卡片：封面图、标题、作者信息、点赞数和点赞功能
   - 视频笔记标识：显示播放按钮
   - 图片加载：使用真实资源图片替代emoji占位符
   - 数据加载：根据选项卡和分类筛选不同笔记内容
   - 笔记详情导航：点击笔记卡片可进入NoteDetail页面

2. **MarketTab页面** (市集)
   - 搜索栏：支持文本输入和实时搜索功能
   - 分类选项卡：推荐、1年1度、运动、穿搭、美护、家居、生活
   - 功能图标网格：市集直播、买手臻选、新品首发、超级满减等
   - 商品瀑布流：双列网格布局，支持垂直滚动
   - 商品卡片：商品图片、名称、价格、原价、销量信息
   - 数据加载：根据分类和搜索条件筛选商品
   - 图片加载：使用真实资源图片替代系统图标
   - 购物车导航：搜索栏右侧购物车图标，点击进入Cart页面

3. **MessagesTab页面** (消息)
   - 顶部标题栏：居中显示"消息"标题，右侧搜索和添加图标
   - 功能图标行：赞和收藏、新增关注、评论和@三个快捷入口
   - 对话列表：显示系统消息、客服消息、活动消息、群聊对话等
   - 对话项目：头像、名称、最后消息内容、时间戳、未读标识
   - 时间格式：今日显示时间，昨天显示"昨天"，本周显示星期，更早显示日期
   - 未读消息：红点标识未读对话

4. **PostTab页面** (发布)
   - 顶部标题栏：左侧关闭按钮(×)，右侧"下一步"发布按钮
   - 图片上传区域：支持点击添加图片，显示相机图标占位符
   - 文本编辑区域："写想法"标题，支持多行文本输入
   - 内容输入框：占位符文本"说点什么或提个问题..."
   - 底部功能选项："写长文"功能入口，支持千字以上内容
   - 交互功能：发布验证、成功提示、返回首页导航
   - 浅蓝色背景设计，符合编辑界面风格

5. **MeTab页面** (我的页面)
   - 用户资料展示区：头像、昵称、小红书号、IP属地
   - 统计数据：关注数、粉丝数、获赞与收藏数
   - 功能按钮：编辑资料、设置
   - 创作灵感和群聊卡片
   - 笔记分类选项卡：笔记、收藏、赞过
   - 底部分享区域

6. **NoteDetail页面** (笔记详情页)
   - 顶部导航栏：返回按钮、作者头像和昵称、关注按钮（描边样式）、分享按钮
   - 笔记内容展示：多图片横向滑动查看，页面指示器，支持封面图片展示
   - 内容区域：笔记标题（如有）、正文内容、话题标签（蓝色可点击）、发布时间和地点信息
   - 评论区域：评论总数显示"共X条评论"，评论列表支持点赞和回复
   - 底部操作栏：评论输入框、点赞按钮（可点亮切换，含数量）、收藏按钮（可点亮切换）、评论按钮（含数量）
   - 界面优化：匹配参考截图布局，简洁明了的信息层次

7. **Cart页面** (购物车)
   - 顶部导航栏：返回按钮、购物车/心愿单切换标签、搜索和管理按钮
   - 分类选项卡：全部、1年1度、降价三个筛选选项
   - 商品分组：按店铺分组显示购物车商品
   - 商品卡片：选择框、商品图片、名称、规格选择、促销标签、价格、数量调节
   - 价格显示：原价、优惠价格、促销标签(限时折扣、免息)
   - 全选功能：支持全选/取消全选所有商品
   - 结算功能：显示选中商品总价和结算按钮
   - 数据管理：购物车商品数据加载、选择状态管理、数量修改

8. **SearchTab页面** (搜索)
   - 搜索栏：返回按钮、搜索输入框、清除按钮、搜索按钮
   - 搜索历史：显示最近搜索记录，灰色圆角背景，支持点击搜索和清空历史
   - 猜你想搜：推荐搜索词汇，红色文字无边框设计，点击可快速搜索
   - 小红书热点：单行显示，包含序号、标题、浏览数，前三名序号为红色
   - 实时搜索：输入时即时显示搜索结果，支持标题、内容、标签匹配
   - 搜索结果：瀑布流展示搜索到的笔记，支持点击查看详情
   - 简洁设计：去除多余装饰，突出内容可读性
   - 搜索导航：点击搜索按钮进入SearchDetail详细搜索页面

9. **FollowingTab页面** (关注管理)
   - 顶部标签栏：互相关注、关注、粉丝、推荐四个选项卡
   - 搜索功能：搜索已关注的人，支持姓名和简介匹配
   - 我的关注区域：显示关注数量、综合排序选项、全部/商家分类筛选
   - 关注列表：用户头像、昵称、认证标识、简介、未看笔记提示
   - 操作按钮：已关注按钮支持取消关注、三点菜单更多操作
   - 导航入口：从"我"页面点击关注数量进入
   - 多类型展示：支持互相关注、关注、粉丝、推荐用户不同列表
   - 博主详情导航：点击关注列表中的用户可进入BloggerDetail页面

10. **BloggerDetail页面** (博主详情页)
   - 顶部导航栏：返回按钮、更多选项菜单
   - 用户信息区域：大头像、昵称、小红书号、IP属地、认证标识
   - 个人简介：个人描述文本和兴趣标签
   - 统计与操作区域：关注数、粉丝数、获赞与收藏数与关注、私信按钮在同一行布局
   - 大框操作按钮：群聊、评价按钮采用大框卡片样式，带emoji图标和文字
   - 笔记区域：笔记标题与搜索图标在同一行，简洁设计
   - 分类筛选：全部、图文、视频三个笔记类型筛选
   - 笔记网格：双列网格展示博主的所有笔记，每个笔记卡片可点击进入NoteDetail详情页
   - 导航交互：点击笔记卡片 → NoteDetail → 返回 → BloggerDetail，完整的导航流程
   - 导航入口：从FollowingTab关注列表点击用户进入

11. **FanTab页面** (粉丝页)
   - 顶部标签栏：互相关注、关注、粉丝、推荐四个选项卡
   - 粉丝列表：显示关注当前用户的粉丝列表
   - 粉丝信息：头像、昵像、认证标识、笔记数和粉丝数统计
   - 回关按钮：支持对粉丝进行回关操作，显示"回关"或"已关注"状态
   - 跨页面导航：点击"关注"标签可跳转到FollowingTab页面
   - 推荐区域：底部显示"你可能感兴趣的人"提示
   - 导航入口：从"我"页面点击粉丝数量进入

12. **CommentAtTab页面** (评论和@)
   - 顶部标题栏：居中显示"收到的评论和@"标题，左侧返回按钮
   - 评论通知列表：显示收到的评论通知，按时间倒序排列
   - 评论卡片内容：用户头像、昵称、"作者"标识(如适用)、时间
   - 回复提示：显示"回复了你的评论"文本说明
   - 评论内容：显示具体的评论文字内容
   - 原笔记预览：灰色背景框显示被评论的原笔记内容
   - 笔记缩略图：右侧显示原笔记的图片缩略图
   - 交互操作按钮：点赞按钮支持切换点亮/取消，回复按钮点击显示输入框
   - 回复输入功能：点击回复按钮显示回复输入框，支持发送回复
   - 回复展示：已发送的回复在评论下方显示，灰色卡片样式
   - 结束标识：列表底部显示"- THE END -"提示
   - 导航入口：从消息页面点击"评论和@"图标进入

13. **收藏页面** (Collection)
   - 基于MeTab页面的收藏标签实现：在"我"页面点击"收藏"标签切换
   - 统计信息显示：顶部显示"笔记 213"和"专辑 21"两项统计数据
   - 网格布局展示：双列网格展示已收藏的笔记，卡片式设计
   - 收藏卡片内容：笔记缩略图、笔记标题，支持多行文本显示
   - 图片占位符：使用图标作为笔记图片的占位符
   - 数据加载：从collections.json加载当前用户的收藏数据
   - 标签栏优化：收藏标签激活时显示"专辑 21"而非"私密 4"
   - 与原笔记数据关联：通过noteId关联显示完整的笔记信息

14. **ProfileEdit页面** (编辑资料)
   - 顶部导航栏：返回按钮、"编辑资料"标题、"保存"按钮（只有更改后才可点击）
   - 头像编辑区域：大头像显示，右下角编辑图标，支持点击编辑
   - 直接编辑功能：名字、简介等主要信息可直接在界面上编辑，支持实时输入
   - 下拉选择功能：性别等信息支持下拉选择，操作简单直观
   - 输入框编辑：生日、地区、职业、学校等信息支持文本输入
   - 只读字段：小红书号为只读显示，不可编辑
   - 智能保存：只有当有更改时保存按钮才会变亮，支持一键保存所有修改
   - 多行编辑：简介字段支持多行文本输入，方便详细描述
   - 导航入口：从"我"页面点击"编辑资料"按钮进入

15. **SearchDetail页面** (搜索详情页)
   - 顶部搜索栏：返回按钮、搜索输入框(默认显示查询词)、搜索按钮
   - 分类标签栏：全部、用户、商品、群聊、问一问五个分类选项卡
   - 筛选标签栏：综合、可购买、最新、实穿主义、微胖mm五个筛选选项
   - 搜索结果展示：双列网格布局展示匹配的笔记内容，全屏显示无底部导航栏干扰
   - 笔记卡片：图片、标题、作者、点赞数等信息
   - 智能搜索：支持标题、内容、作者、标签多维度匹配
   - 分类筛选：根据选择的分类和筛选条件过滤结果
   - 丰富内容：新增8个秋冬穿搭主题笔记，包含毛衣叠穿、外套选购、显瘦搭配、配色指南、微胖mm专题、鞋子搭配、实穿主义、围巾系法等
   - 导航入口：从SearchTab页面点击搜索按钮进入

16. **主导航**
   - 底部导航栏：首页、市集、发布(+)、消息、我
   - 当前所有五个Tab均已完全实现：HomeTab、MarketTab、PostTab、MessagesTab、MeTab
   - 页面导航：支持从HomeTab导航到NoteDetail详情页和SearchTab搜索页面，从SearchTab导航到SearchDetail搜索详情页面，从MarketTab导航到Cart购物车页面，从MeTab导航到FollowingTab关注管理页面、FanTab粉丝页面和ProfileEdit编辑资料页面，从FollowingTab导航到BloggerDetail博主详情页面，从FanTab导航到FollowingTab关注管理页面，从MessagesTab导航到CommentAtTab评论页面，在MeTab内通过标签切换访问Collection收藏功能
   - 默认启动显示首页

#### 技术架构

- **MVP 架构模式**
  - View: HomeTabScreen.kt, MarketTabScreen.kt, PostTabScreen.kt, MessagesTabScreen.kt, MeTabScreen.kt, NoteDetailScreen.kt, CartScreen.kt, SearchTabScreen.kt, SearchDetailScreen.kt, FollowingTabScreen.kt, BloggerDetailScreen.kt, FanTabScreen.kt, CommentAtTabScreen.kt, ProfileEditScreen.kt (UI层)
  - Presenter: HomeTabPresenter.kt, MarketTabPresenter.kt, PostTabPresenter.kt, MessagesTabPresenter.kt, MeTabPresenter.kt, NoteDetailPresenter.kt, CartPresenter.kt, SearchTabPresenter.kt, SearchDetailPresenter.kt, FollowingTabPresenter.kt, BloggerDetailPresenter.kt, FanTabPresenter.kt, CommentAtTabPresenter.kt, ProfileEditPresenter.kt (业务逻辑层)
  - Contract: HomeTabContract.kt, MarketTabContract.kt, PostTabContract.kt, MessagesTabContract.kt, MeTabContract.kt, NoteDetailContract.kt, CartContract.kt, SearchTabContract.kt, SearchDetailContract.kt, FollowingTabContract.kt, BloggerDetailContract.kt, FanTabContract.kt, CommentAtTabContract.kt, ProfileEditContract.kt (接口定义)

- **数据加载**
  - JsonDataLoader.kt: 加载 assets 中的 JSON 数据
  - 支持用户、笔记、商品、消息、评论、收藏、关注、购物车等数据的解析

#### UI 特点

- 浅色主题风格，清爽简洁的界面设计
- 使用 Material Design 3 组件
- 响应式布局，适配不同屏幕尺寸
- 图标使用 Material Icons 和 Emoji 表情
- 符合原版小红书的 UI 结构和交互逻辑
- 统一的浅色配色方案：白色背景，黑色文字，灰色边框

## 构建状态

✅ **构建成功** - 2025年10月21日

- 所有 Kotlin 代码编译通过
- 依赖项正确配置 (包括 Gson 用于 JSON 解析)
- UI 渲染正常
- MVP 架构完整实现
- 所有五个主要Tab功能完整：HomeTab、MarketTab、PostTab、MessagesTab、MeTab
- NoteDetail详情页功能完整实现
- Cart购物车页面功能完整实现
- SearchTab搜索页面功能完整实现
- SearchDetail搜索详情页面功能完整实现
- FollowingTab关注管理页面功能完整实现
- BloggerDetail博主详情页功能完整实现
- 修复了数据类型匹配和图标引用问题
- 完整的页面导航系统，支持多层级页面跳转
- BloggerDetail页面布局优化：统计数据与按钮同行，大框按钮样式，笔记标题与搜索同行
- 新增6个笔记内容：家居装修、健身日记、学习方法、摄影技巧、书单推荐、宠物日常
- 新增8个秋冬穿搭主题笔记：毛衣叠穿指南、外套选购攻略、显瘦搭配公式、配色指南、微胖mm专题、鞋子搭配、实穿主义、围巾系法
- FanTab页面界面优化：返回按钮与标签同行，回关按钮白色背景，支持标签切换
- FollowingTab页面布局优化：去掉"关注管理"标题，返回按钮与标签同行
- NoteDetail界面优化：收藏图标改为星星，收藏时显示金黄色
- CommentAtTab页面完整实现：评论通知列表，支持点赞回复，显示原笔记预览
- BloggerDetail页面导航修复：解决了从博主详情页点击笔记无法进入笔记详情页的问题，修复了导航逻辑和返回流程
- JsonDataLoader性能优化：修复了递归调用问题，添加用户数据缓存机制，提升数据加载性能
- ProfileEdit页面编辑增强：实现了所有信息字段的直接编辑功能，支持实时修改和一键保存
- Collection收藏页面完整实现：基于MeTab收藏标签，网格布局展示收藏笔记，统计数据显示
- ProfileEdit编辑资料页面完整实现：完整的个人信息编辑界面，支持头像、基本信息、个人资料编辑
- SearchDetail搜索详情页面界面优化：移除活动推荐区域，隐藏底部导航栏，简化界面设计，专注搜索结果展示
- NoteDetail页面界面优化：更新顶部作者区域布局，添加笔记标题和话题标签显示，优化互动按钮布局，改进评论区域和底部操作栏设计

## 待开发功能

*所有主要功能已完成开发*

## 开发说明

- 项目使用 Android Gradle Plugin 8.6.0
- 目标 SDK: 33, 编译 SDK: 36
- 最低支持 SDK: 33
- 使用 Jetpack Compose UI 框架
- 遵循 MVP 架构模式，确保代码可维护性

## 数据说明

所有测试数据均为虚拟数据，用于 AI Agent 测试。当前用户为 "CLY"，ID 为 "user_current"。数据包含了测试任务所需的各种场景，如关注关系、笔记内容、商品信息等。